CREATE DATABASE IF NOT EXISTS BD_SUPERMERCADO_FUNCIONARIO_PRODUTO_CONSUMIDOR;
USE BD_SUPERMERCADO_FUNCIONARIO_PRODUTO_CONSUMIDOR;

CREATE TABLE IF NOT EXISTS SUPERMERCADO(
	SUP_CNPJ VARCHAR(15) PRIMARY KEY,
    SUR_RAZAO_SOCIAL VARCHAR(100) NOT NULL,
    SUP_TELEFONE VARCHAR(15) NOT NULL,
    SUP_EMAIL VARCHAR(200) NOT NULL,
    SUP_ENDERECO_LOGRADOURO VARCHAR(100) NOT NULL,
    SUP_ENDERECO_NUMERO VARCHAR(10) NOT NULL,
    SUP_ENDERECO_CIDADE VARCHAR(100) NOT NULL,
    SUP_EDERECO_ESTADO VARCHAR(2) NOT NULL
);

CREATE TABLE IF NOT EXISTS PRODUTO(
	PRO_ID INTEGER AUTO_INCREMENT PRIMARY KEY,
    PRO_CODIGO_BARRAS VARCHAR(100) NOT NULL,
    PRO_NOME VARCHAR(50) NOT NULL,
    PRO_PESO  FLOAT NOT NULL,
    PRO_QUANTIDADE INTEGER NOT NULL,
    PRO_PRECO FLOAT NOT NULL,
    PRO_DATA_VALIDADE DATE NOT NULL
);

CREATE TABLE IF NOT EXISTS CONSUMIDOR(
	CON_CPF VARCHAR(17) PRIMARY KEY,
    CON_NOME VARCHAR(250) NOT NULL,
    CON_TELEFONE VARCHAR(15) NOT NULL,
    CON_EMAIL VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS FUNCIONARIO(
	FUN_CPF VARCHAR(15) PRIMARY KEY,
    FUN_NOME VARCHAR(255) NOT NULL,
    FUN_DATA_NASCIMENTO DATE NOT NULL,
    FUN_TELEFONE VARCHAR(18) NOT NULL,
    FUN_EMAIL VARCHAR(255) NOT NULL,
    FUN_CARTEIRA_TRABALHO VARCHAR(15) NOT NULL,
    FUN_BANCO_AGENCIA VARCHAR(20),
    FUN_BANCO_CONTA VARCHAR(20),
    FUN_DATA_ADMISSAO DATE NOT NULL,
    FUN_JORNADA_TRABALHO INTEGER NOT NULL,
    FK_SUP_CNPJ VARCHAR(15) NOT NULL,
    FOREIGN KEY (FK_SUP_CNPJ) REFERENCES SUPERMERCADO(SUP_CNPJ) ON DELETE CASCADE
);

CREATE TABLE IF NOT EXISTS SUPERMERCADO_PRODUTO(
	SPR_ID INTEGER AUTO_INCREMENT PRIMARY KEY,
    FK_SUP_CNPJ VARCHAR(15) NOT NULL,
    FK_PRO_ID INTEGER NOT NULL,
    FOREIGN KEY (FK_SUP_CNPJ) REFERENCES SUPERMERCADO(SUP_CNPJ) ON DELETE CASCADE,
    FOREIGN KEY(FK_PRO_ID) REFERENCES PRODUTO(PRO_ID)
);

CREATE TABLE IF NOT EXISTS PRODUTO_CONSUMIDOR(
	PCO_ID INTEGER AUTO_INCREMENT PRIMARY KEY,
    FK_CON_CPF VARCHAR(15) NOT NULL,
    FK_PRO_ID INTEGER NOT NULL,
    FOREIGN KEY (FK_CON_CPF) REFERENCES CONSUMIDOR(CON_CPF) ON DELETE CASCADE,
    FOREIGN KEY(FK_PRO_ID) REFERENCES PRODUTO(PRO_ID) ON DELETE CASCADE
);

INSERT INTO SUPERMERCADO (
	SUP_CNPJ,
    SUR_RAZAO_SOCIAL,
    SUP_TELEFONE,
    SUP_EMAIL,
    SUP_ENDERECO_LOGRADOURO,
    SUP_ENDERECO_NUMERO,
    SUP_ENDERECO_CIDADE,
    SUP_EDERECO_ESTADO)
VALUES (
	"12345678000101",
    "Supermercado Grick",
    "12333412",
    "grick_tambau@email.com",
    "Grick Street",
    "10000",
    "Tambacity",
    "SP"
);

INSERT INTO SUPERMERCADO (
	SUP_CNPJ,
    SUR_RAZAO_SOCIAL,
    SUP_TELEFONE,
    SUP_EMAIL,
    SUP_ENDERECO_LOGRADOURO,
    SUP_ENDERECO_NUMERO,
    SUP_ENDERECO_CIDADE,
    SUP_EDERECO_ESTADO)
VALUES (
	"12345678919101",
    "Pontes",
    "1232412",
    "Pontes Lanches",
    "Pontes Brigde",
    "13121",
    "Tambacity",
    "SP"
);

INSERT INTO SUPERMERCADO (
	SUP_CNPJ,
    SUR_RAZAO_SOCIAL,
    SUP_TELEFONE,
    SUP_EMAIL,
    SUP_ENDERECO_LOGRADOURO,
    SUP_ENDERECO_NUMERO,
    SUP_ENDERECO_CIDADE,
    SUP_EDERECO_ESTADO)
VALUES (
	"1234567045101",
    "Jall",
    "1233912",
    "Jall_compra_nois@gmail.com",
    "Rua do Brasa Brothers",
    "1312355",
    "Tambacity",
    "SP"
);

INSERT INTO SUPERMERCADO (
	SUP_CNPJ,
    SUR_RAZAO_SOCIAL,
    SUP_TELEFONE,
    SUP_EMAIL,
    SUP_ENDERECO_LOGRADOURO,
    SUP_ENDERECO_NUMERO,
    SUP_ENDERECO_CIDADE,
    SUP_EDERECO_ESTADO)
VALUES (
	"3234567848123",
    "Mercado do Cidin",
    "12312412",
    "cidin_venda@email.com",
    "Érico primo Uiana fé",
    "183",
    "Tambacity",
    "SP"
);

INSERT INTO SUPERMERCADO (
SUP_CNPJ,
    SUR_RAZAO_SOCIAL,
    SUP_TELEFONE,
    SUP_EMAIL,
    SUP_ENDERECO_LOGRADOURO,
    SUP_ENDERECO_NUMERO,
    SUP_ENDERECO_CIDADE,
    SUP_EDERECO_ESTADO)
VALUES (
	"12345678220101",
    "São Francisco stores",
    "12377412",
    "San francisco pai@email.com",
    "Aquele lugar lá, perto do coiso",
    "1030",
    "Tambacity",
    "SP"
);
SELECT * FROM SUPERMERCADO;

DELETE FROM SUPERMERCADO
WHERE SUP_CNPJ = "";


INSERT INTO PRODUTO(
	PRO_CODIGO_BARRAS,
    PRO_NOME,
    PRO_PESO,
    PRO_QUANTIDADE,
    PRO_PRECO,
    PRO_DATA_VALIDADE
)
VALUES (
	"30910239109319832",
    "ARROZ 5KG",
     5.0,
    "500",
    26.90,
    '2025-12-25'
);

INSERT INTO PRODUTO(
	PRO_CODIGO_BARRAS,
    PRO_NOME,
    PRO_PESO,
    PRO_QUANTIDADE,
    PRO_PRECO,
    PRO_DATA_VALIDADE
)
VALUES (
	"7891234567890",
    "FEIJAO CARIOCA 1KG",
     1.0,
    "300",
    8.50,
    '2026-01-15'
);

INSERT INTO PRODUTO(
	PRO_CODIGO_BARRAS,
    PRO_NOME,
    PRO_PESO,
    PRO_QUANTIDADE,
    PRO_PRECO,
    PRO_DATA_VALIDADE
)
VALUES (
	"7896543219876",
    "OLEO DE SOJA 900ML",
     0.9,
    "200",
    7.20,
    '2025-11-10'
);

INSERT INTO PRODUTO(
	PRO_CODIGO_BARRAS,
    PRO_NOME,
    PRO_PESO,
    PRO_QUANTIDADE,
    PRO_PRECO,
    PRO_DATA_VALIDADE
)
VALUES (
	"7893332221110",
    "AÇUCAR REFINADO 1KG",
     1.0,
    "400",
    4.80,
    '2026-03-01'
);

INSERT INTO PRODUTO(
	PRO_CODIGO_BARRAS,
    PRO_NOME,
    PRO_PESO,
    PRO_QUANTIDADE,
    PRO_PRECO,
    PRO_DATA_VALIDADE
)
VALUES (
	"7890001112223",
    "CAFÉ TRADICIONAL 500G",
     0.5,
    "250",
    12.75,
    '2025-09-30'
);
SELECT * FROM PRODUTO;

INSERT INTO CONSUMIDOR (
	CON_CPF,
    CON_NOME,
    CON_TELEFONE,
    CON_EMAIL
)
VALUES (
	"44636134850",
    "Felipe Donizetti Ribeiro",
    "19 99437-0065",
    "LipeRibeiro0509@gmail.com"
);

INSERT INTO CONSUMIDOR (
	CON_CPF,
    CON_NOME,
    CON_TELEFONE,
    CON_EMAIL
)
VALUES (
	"32165498700",
    "Mariana Alves Costa",
    "11 98765-4321",
    "mariana.costa@gmail.com"
);

INSERT INTO CONSUMIDOR (
	CON_CPF,
    CON_NOME,
    CON_TELEFONE,
    CON_EMAIL
)
VALUES (
	"45896312789",
    "Rafael Souza Lima",
    "21 99654-2233",
    "rafael.lima@hotmail.com"
);

INSERT INTO CONSUMIDOR (
	CON_CPF,
    CON_NOME,
    CON_TELEFONE,
    CON_EMAIL
)
VALUES (
	"70213456890",
    "Camila Torres Mendes",
    "31 98234-5566",
    "camila.mendes@yahoo.com"
);

INSERT INTO CONSUMIDOR (
	CON_CPF,
    CON_NOME,
    CON_TELEFONE,
    CON_EMAIL
)
VALUES (
	"91564327810",
    "Lucas Fernandes Oliveira",
    "41 99788-1144",
    "lucas.oliveira@outlook.com"
);
SELECT * FROM CONSUMIDOR;

INSERT INTO FUNCIONARIO (
	FUN_CPF,
    FUN_NOME,
    FUN_DATA_NASCIMENTO,
    FUN_TELEFONE,
    FUN_EMAIL,
    FUN_CARTEIRA_TRABALHO,
    FUN_BANCO_AGENCIA,
    FUN_BANCO_CONTA,
    FUN_DATA_ADMISSAO,
    FUN_JORNADA_TRABALHO,
    FK_SUP_CNPJ
)
VALUES (
	"12345678910",
    "ZÉZINHO",
    "1985-03-12",
    "11987654321",
    "zezin_ranca_diu@gmail.com",
    "cart_zezin.pdf",
    "1234",
    "56789",
    "2020-01-15",
    44,
    "12345678000101"
);

INSERT INTO FUNCIONARIO (
	FUN_CPF,
    FUN_NOME,
    FUN_DATA_NASCIMENTO,
    FUN_TELEFONE,
    FUN_EMAIL,
    FUN_CARTEIRA_TRABALHO,
    FUN_BANCO_AGENCIA,
    FUN_BANCO_CONTA,
    FUN_DATA_ADMISSAO,
    FUN_JORNADA_TRABALHO,
    FK_SUP_CNPJ
)
VALUES (
	"98765432100",
    "Maria Clara Santos",
    "1990-07-21",
    "11995544332",
    "maria.clara@gmail.com",
    "ct_maria.pdf",
    "4321",
    "99887",
    "2019-08-10",
    40,
    "12345678919101"
);

INSERT INTO FUNCIONARIO (
	FUN_CPF,
    FUN_NOME,
    FUN_DATA_NASCIMENTO,
    FUN_TELEFONE,
    FUN_EMAIL,
    FUN_CARTEIRA_TRABALHO,
    FUN_BANCO_AGENCIA,
    FUN_BANCO_CONTA,
    FUN_DATA_ADMISSAO,
    FUN_JORNADA_TRABALHO,
    FK_SUP_CNPJ
)
VALUES (
	"65498732111",
    "Carlos Henrique Souza",
    "1988-02-05",
    "21987654321",
    "carlos.henrique@hotmail.com",
    "ct_carlos.pdf",
    "5678",
    "33445",
    "2021-04-22",
    44,
    "1234567045101"
);

INSERT INTO FUNCIONARIO (
	FUN_CPF,
    FUN_NOME,
    FUN_DATA_NASCIMENTO,
    FUN_TELEFONE,
    FUN_EMAIL,
    FUN_CARTEIRA_TRABALHO,
    FUN_BANCO_AGENCIA,
    FUN_BANCO_CONTA,
    FUN_DATA_ADMISSAO,
    FUN_JORNADA_TRABALHO,
    FK_SUP_CNPJ
)
VALUES (
	"32178965422",
    "Ana Beatriz Lima",
    "1995-10-30",
    "31991223344",
    "ana.beatriz@yahoo.com",
    "ct_ana.pdf",
    "7890",
    "55667",
    "2022-06-13",
    36,
    "3234567848123"
);

INSERT INTO FUNCIONARIO (
	FUN_CPF,
    FUN_NOME,
    FUN_DATA_NASCIMENTO,
    FUN_TELEFONE,
    FUN_EMAIL,
    FUN_CARTEIRA_TRABALHO,
    FUN_BANCO_AGENCIA,
    FUN_BANCO_CONTA,
    FUN_DATA_ADMISSAO,
    FUN_JORNADA_TRABALHO,
    FK_SUP_CNPJ
)
VALUES (
	"85296374100",
    "João Pedro Martins",
    "1992-12-08",
    "41997885566",
    "joao.martins@outlook.com",
    "ct_joao.pdf",
    "3456",
    "77889",
    "2018-11-01",
    44,
    "12345678220101"
);
SELECT * FROM SUPERMERCADO;
INSERT INTO SUPERMERCADO_PRODUTO (FK_SUP_CNPJ, FK_PRO_ID)
VALUES
("1234567045101", 1),
("12345678000101", 2),
("12345678220101", 3),
("12345678919101", 4),
("3234567848123", 5);

INSERT INTO PRODUTO_CONSUMIDOR (FK_CON_CPF, FK_PRO_ID)
VALUES
("44636134850", 1),
("32165498700", 2),
("45896312789", 3),
("70213456890", 4),
("91564327810", 5);

SELECT * FROM SUPERMERCADO;

/* 
CONSULTAR O AUMENTO DE R$ 2,00 NO PREÇO DOS PRODUTOS COM PREÇO ATUAL >= R$ 5,00
*/

SELECT PRO_NOME AS "NOME",
		PRO_CODIGO_BARRAS AS "CÓDIGO DE BARRAS",
		PRO_PRECO AS "PREÇO ATUAL",
        TRUNCATE((PRO_PRECO + 2),2) AS "PREÇO COM AJUSTDE DE R$ 2,00"
FROM 	PRODUTO
WHERE 	PRO_PRECO >= 5;